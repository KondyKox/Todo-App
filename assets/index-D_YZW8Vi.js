(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))d(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&d(r)}).observe(document,{childList:!0,subtree:!0});function o(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function d(n){if(n.ep)return;n.ep=!0;const s=o(n);fetch(n.href,s)}})();const q=document.querySelectorAll(".todos__list"),u=document.querySelector("#modal"),p=document.querySelector(".btn-xmark"),k=document.querySelectorAll(".btn-todo"),h=document.querySelector(".btn-add"),b="TODO_APP_TODOS";function N(e){try{const t=localStorage.getItem(b);t&&(e.todos=JSON.parse(t))}catch(t){console.error("Cannot read data from localStorage",t)}}function m(e){localStorage.setItem(b,JSON.stringify(e.todos))}function y(e){const t=document.querySelector("#todo-name");if(!(t!=null&&t.value.trim()))return;const o={id:crypto.randomUUID().toLowerCase(),name:t.value.trim(),status:e.clickedStatus};e.todos[e.clickedStatus].push(o),C(),m(e),E(e,o),console.log(`New todo: ${o}`)}function A(e,t){_(t),e.todos[t.status]=e.todos[t.status].filter(o=>o.id!==t.id),m(e)}function D(e,t){const o=document.querySelector("#todo-name");if(!o.value.trim())return;const d=o.value;e.todos[t.status]=e.todos[t.status].map(r=>(r.id===t.id&&(r.name=d),r));const n=document.querySelector(`[data-id="${t.id}"`),s=n==null?void 0:n.querySelector(".todo__header");s&&(s.textContent=d),C(),m(e)}function E(e,t){const o=document.querySelector(`[data-status="${t.status}"]`),d=o==null?void 0:o.querySelector(".todos__list"),n=document.createElement("li");n.classList.add("todo"),n.setAttribute("data-id",t.id),n.draggable=!0,n.addEventListener("dragstart",i=>{var l;(l=i.dataTransfer)==null||l.setData("text/plain",JSON.stringify({id:t.id,status:t.status}))});const s=document.createElement("h6");s.classList.add("todo__header"),s.innerText=t.name;const r=M(e,t);n.appendChild(s),n.appendChild(r),d.appendChild(n)}function M(e,t){const o=document.createElement("div");o.classList.add("todo__btn__container");const d=document.createElement("button");d.classList.add("btn","btn-edit","btn-utils"),d.addEventListener("click",()=>v(e,"edit",t)),d.innerText="✏️";const n=document.createElement("button");return n.classList.add("btn","btn-danger","btn-utils"),n.addEventListener("click",()=>A(e,t)),n.innerText="🗑️",o.appendChild(d),o.appendChild(n),o}function S(e){Object.keys(e.todos).forEach(o=>{e.todos[o].forEach(d=>{_(d),E(e,d)})})}function _(e){const t=document.querySelector(`[data-id="${e.id}"]`);t==null||t.remove()}function v(e,t,o){switch(t){case"add":L(e,t);break;case"edit":L(e,t,o);break}u&&(u.style.display="flex")}function g(){u&&(u.style.display="none")}function L(e,t,o){const d=document.querySelector(".modal__container");d.innerHTML="";const n=document.createElement("h2");n&&(n.textContent=t==="add"?"Adding todo":"Editing todo");const s=document.createElement("form");s.id="todo__form",s.classList.add("modal__form"),s.addEventListener("submit",x=>{x.preventDefault()});const r=document.createElement("div");r.classList.add("modal__form__inputs");const i=document.createElement("div");i.classList.add("modal__form__input");const l=document.createElement("label");l.htmlFor="todo-name",l.innerText="TODO Name";const a=document.createElement("input");a.type="text",a.id="todo-name",a.placeholder="Enter todo name...",a.required=!0,a.maxLength=30,t==="edit"&&o&&(a.value=o.name);const f=document.createElement("span");f.classList.add("succesful"),f.innerText=t==="add"?"Added todo!":"Updated todo!";const{utilsBtn:O,closeModalBtn:T}=w(e,t,o);i.appendChild(l),i.appendChild(a),r.appendChild(i),s.appendChild(r),d.appendChild(n),d.appendChild(s),d.appendChild(O),d.appendChild(f),d.appendChild(T)}function w(e,t,o){const d=document.createElement("button");d.classList.add("btn"),d.innerText=t==="add"?"Add todo":"Save todo",d.addEventListener("click",()=>{switch(t){case"add":y(e);break;case"edit":o&&D(e,o);break}});const n=document.createElement("button");n.classList.add("btn","btn-xmark");const s=document.createElement("i");return s.classList.add("fa-solid","fa-xmark"),n.addEventListener("click",g),n.appendChild(s),{utilsBtn:d,closeModalBtn:n}}function C(){const e=document.querySelector(".succesful");e==null||e.classList.add("succesful-animated"),setTimeout(()=>{g(),e==null||e.classList.remove("succesful-animated")},2e3)}const c={todos:{todo:[],doing:[],done:[]},clickedStatus:"todo"};q.forEach(e=>{e.addEventListener("dragover",t=>{t.preventDefault()}),e.addEventListener("drop",t=>{var l;t.preventDefault();const o=(l=t.dataTransfer)==null?void 0:l.getData("text/plain");if(!o)return;const{id:d,status:n}=JSON.parse(o),s=c.todos[n].find(a=>a.id===d);if(!s)return;const r=t.target.closest("[data-status]");if(!r)return;const i=r.getAttribute("data-status");!i||i===n||(c.todos[n].map(a=>(a.id===s.id&&(a.status=i),a)),c.todos[n]=c.todos[n].filter(a=>a.id!==d),c.todos[i].push(s),S(c),m(c))})});k.forEach(e=>{e.addEventListener("click",t=>{const d=t.target.dataset.category;c.clickedStatus=d,v(c,"add")})});p==null||p.addEventListener("click",()=>{g()});h==null||h.addEventListener("click",()=>y(c));N(c);S(c);
